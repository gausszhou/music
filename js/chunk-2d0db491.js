(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0db491"],{"6ee1":function(t,a,s){"use strict";s.r(a);s("fb6a");var i={name:"playlist",data:function(){return{activeIndex:"1",songstotal:0,songslimit:10,songspage:1,total:0,limit:10,page:1,id:"",playlist:{creator:{},createTime:"000"},tracks:[],comments:[]}},computed:{tracksShow:function(){return this.tracks.slice((this.songspage-1)*this.songslimit,this.songspage*this.songslimit)},createTime:function(){return new Date(this.playlist.createTime).toISOString().slice(0,10)}},created:function(){this.getPlayListDetail(),this.getCommentPlayList()},methods:{getPlayListDetail:function(){var t=this,a={id:this.$route.query.id};this.$http.getPlayListDetail(a).then((function(a){t.playlist=a.data.playlist,t.tracks=t.playlist.tracks,t.songstotal=t.tracks.length}))},getCommentPlayList:function(){var t=this,a={id:this.$route.query.id,type:0,limit:this.limit,offset:(this.page-1)*this.limit};this.$http.getCommentPlayList(a).then((function(a){t.comments=a.data.comments,t.total=a.data.total}))},playMV:function(t){this.$router.push({name:"detailMV",query:{mvid:t.mv}})},getMusic:function(t){this.$store.dispatch("getMusic",t)},handleCurrentChangesongs:function(t){this.songspage=t,this.getPlayListDetail()},handleCurrentChange:function(t){this.page=t,this.getCommentPlayList()}}},e=s("2877"),n=Object(e.a)(i,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"playlist-container"},[s("div",{staticClass:"top-wrap"},[s("div",{staticClass:"img-wrap"},[s("img",{attrs:{src:t.playlist.coverImgUrl,alt:""}})]),s("div",{staticClass:"info-wrap"},[s("p",{staticClass:"title"},[t._v(t._s(t.playlist.name))]),s("div",{staticClass:"author-wrap"},[s("img",{staticClass:"avatar",attrs:{src:t.playlist.creator.avatarUrl,alt:""}}),s("span",{staticClass:"name"},[t._v(t._s(t.playlist.creator.nickname))]),s("span",{staticClass:"time"},[t._v(t._s(t.createTime)+" 创建")])]),t._m(0),s("div",{staticClass:"tag-wrap"},[s("span",{staticClass:"title"},[t._v("标签:")]),s("ul",t._l(t.playlist.tags,(function(a,i){return s("li",{key:i},[t._v(t._s(a))])})),0)]),s("div",{staticClass:"desc-wrap"},[s("span",{staticClass:"title"},[t._v("简介:")]),s("span",{staticClass:"desc"},[t._v(t._s(t.playlist.description))])])])]),s("el-tabs",{model:{value:t.activeIndex,callback:function(a){t.activeIndex=a},expression:"activeIndex"}},[s("el-tab-pane",{attrs:{label:"歌曲列表",name:"1"}},[s("table",{staticClass:"el-table playlist-table"},[s("thead",[s("th"),s("th"),s("th",[t._v("音乐标题")]),s("th",[t._v("专辑")]),s("th",[t._v("时长")])]),s("tbody",t._l(t.tracksShow,(function(a,i){return s("tr",{key:i,staticClass:"el-table__row"},[s("td",[t._v(t._s(i+1))]),s("td",[s("div",{staticClass:"img-wrap"},[s("img",{attrs:{src:a.al.picUrl,alt:""}}),s("span",{staticClass:"iconfont icon-play",on:{click:function(s){return t.getMusic(a)}}})])]),s("td",[s("div",{staticClass:"song-wrap"},[s("div",{staticClass:"name-wrap"},[s("span",[t._v(t._s(a.name))]),a.mv?s("span",{staticClass:"iconfont mv-tag icon-mv",on:{click:function(s){return t.playMV(a)}}},[t._v("MV")]):t._e()])])]),s("td",[t._v(t._s(a.al.name))]),s("td",[t._v(t._s(t._f("mstotime")(a.dt)))])])})),0)]),s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.songstotal,"current-page":t.songspage,"page-size":t.songslimit},on:{"current-change":t.handleCurrentChangesongs}})],1),s("el-tab-pane",{attrs:{label:"评论("+t.total+")",name:"2"}},[s("div",{staticClass:"comment-wrap"},[s("p",{staticClass:"title"},[t._v(" 最新评论 "),s("span",{staticClass:"number"},[t._v("("+t._s(t.total)+")")])]),s("div",{staticClass:"comments-wrap"},t._l(t.comments,(function(a,i){return s("div",{key:i,staticClass:"item"},[s("div",{staticClass:"icon-wrap"},[s("img",{attrs:{src:a.user.avatarUrl,alt:""}})]),s("div",{staticClass:"content-wrap"},[s("div",{staticClass:"content"},[s("span",{staticClass:"name"},[t._v(t._s(a.user.nickname))]),s("span",{staticClass:"comment"},[t._v(" "+t._s(a.content))])]),a.beReplied.length?s("div",{staticClass:"re-content"},[s("span",{staticClass:"name"},[t._v("@"+t._s(a.beReplied[0].user.nickname))]),s("span",{staticClass:"comment"},[t._v(t._s(a.beReplied[0].content))])]):t._e(),s("div",{staticClass:"date"},[t._v(t._s(t._f("timestamp")(a.time)))])])])})),0)]),s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page,"page-size":t.limit},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"play-wrap"},[a("span",{staticClass:"iconfont icon-circle-play"}),a("span",{staticClass:"text"},[this._v("播放全部")])])}],!1,null,null,null);a.default=n.exports}}]);